/*!
 * izitin - version 0.3.1
 *
 * Made with ‚ù§ by Steve Ottoz so@dev.so
 *
 * Copyright (c) 2017 Steve Ottoz
 */
(function(a,b){if('function'==typeof define&&define.amd)define(['module','exports'],b);else if('undefined'!=typeof exports)b(module,exports);else{var c={exports:{}};b(c,c.exports),a.Izitin=c.exports}})(this,function(a,b){'use strict';function c(g,h){if(!(g instanceof h))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var d=function(){function g(h,j){for(var k=0;k<j.length;k++){var l=j[k];l.enumerable=l.enumerable,l.configurable=!0,'value'in l&&(l.writable=!0),Object.defineProperty(h,l.key,l)}}return function(h,j,k){return j&&g(h.prototype,j),k&&g(h,k),h}}(),f=function(){function g(){var h=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],j=h.fraction,k=void 0===j?0:j,l=h.fn,m=void 0===l?null:l,n=h.container,o=void 0===n?document:n,p=h.items,q=void 0===p?'.izitin':p,r=h.stagger,s=void 0===r?100:r,t=h.css,u=void 0===t||t,v=h.remove,w=void 0!==v&&v,x=h.throttle,y=void 0===x?0:x;c(this,g),this.fraction=Math.max(Math.min(+k,1),0),this.fn=m,this.container=o instanceof Node?o:document.querySelector(o),this.items=q,this.stagger=+s,this.css=!!u,this.remove=!!w,this.throttle=+y,this.init()}return d(g,[{key:'init',value:function(){this.lastPosition=window.pageYOffset||document.documentElement.scrollTop,this.check(),this.isInitialized||(this.handler=this.throttle?this.throttling(this.check.bind(this),this.throttle).bind(this):this.check.bind(this),window.addEventListener('scroll',this.handler),window.addEventListener('load',this.handler),window.addEventListener('resize',this.handler),this.isInitialized=!0)}},{key:'check',value:function(j){var k=this,l=window.pageYOffset||document.documentElement.scrollTop,m=this.lastPosition>l,n=0,o=this.container.querySelectorAll(this.items);m&&(o=[].slice.call(o,0).reverse()),o.forEach(function(p,q){var r=void 0,s=void 0,t=void 0,u=void 0,v=void 0;try{if(r=p.getBoundingClientRect(),s=window.innerWidth,t=window.innerHeight,u={above:0>r.top&&0>=r.bottom,left:0>r.left&&0>=r.right,right:r.left>=s&&r.right>s,below:r.top>=t&&r.bottom>t},k.fraction){var w=Math.min(r.height,t)*k.fraction,x=Math.min(r.width,s)*k.fraction;v=(r.top<=t-w&&0<r.bottom||r.top<t&&r.bottom>=w&&r.bottom<=t)&&(r.left<=s-x&&0<r.right||r.left<s&&r.right>=x&&r.right<=s)}else v=r.top<t&&0<r.bottom&&r.left<s&&0<r.right;v?k.stagger&&!p.classList.contains('itizin')?(k.css?(p.style.transitionDelay=k.stagger*n+'ms',p.classList.add('itizin')):setTimeout(function(){p.classList.add('itizin')},k.stagger*n),n++):p.classList.add('itizin'):k.remove?(p.style.transitionDelay='',p.classList.remove('itizin')):p.style.transitionDelay='',u.above?p.classList.add('izitin-above'):p.classList.remove('izitin-above'),u.below?p.classList.add('izitin-below'):p.classList.remove('izitin-below'),u.left?p.classList.add('izitin-left'):p.classList.remove('izitin-left'),u.right?p.classList.add('izitin-right'):p.classList.remove('izitin-right')}catch(z){}var y={index:q,direction:m?'up':'down',target:p,izitin:v,position:u,rect:r};k.fn&&k.fn.apply(p,[y])})}},{key:'throttling',value:function(j){var k=this,l=1>=arguments.length||void 0===arguments[1]?50:arguments[1],m=void 0,n=void 0;return function(){for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];var r=Date.now();m&&r<m+l?(clearTimeout(n),n=setTimeout(function(){m=r,j.apply(this,p)},l)):(m=r,j.apply(k,p))}}},{key:'destroy',value:function(){this.container.querySelectorAll(this.items).forEach(function(j){j.classList.remove('itizin'),j.classList.remove('izitin-above'),j.classList.remove('izitin-below'),j.classList.remove('izitin-left'),j.classList.remove('izitin-right')}),window.removeEventListener('scroll',this.handler),window.removeEventListener('load',this.handler),window.removeEventListener('resize',this.handler),this.isInitialized=!1}}]),g}();b.default=f,a.exports=b['default']});