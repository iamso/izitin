/*!
 * izitin - version 0.5.0
 *
 * Made with ‚ù§ by Steve Ottoz so@dev.so
 *
 * Copyright (c) 2017 Steve Ottoz
 */
(function(a,b){if('function'==typeof define&&define.amd)define(['module','exports'],b);else if('undefined'!=typeof exports)b(module,exports);else{var c={exports:{}};b(c,c.exports),a.Izitin=c.exports}})(this,function(a,b){'use strict';function c(g,h){if(!(g instanceof h))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var d=function(){function g(h,j){for(var k=0;k<j.length;k++){var l=j[k];l.enumerable=l.enumerable,l.configurable=!0,'value'in l&&(l.writable=!0),Object.defineProperty(h,l.key,l)}}return function(h,j,k){return j&&g(h.prototype,j),k&&g(h,k),h}}(),f=function(){function g(){var h=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],j=h.fraction,k=void 0===j?0:j,l=h.fn,m=void 0===l?null:l,n=h.container,o=void 0===n?document:n,p=h.items,q=void 0===p?'.izitin':p,r=h.stagger,s=void 0===r?100:r,t=h.css,u=void 0===t||t,v=h.remove,w=void 0!==v&&v,x=h.throttle,y=void 0===x?0:x,z=h.detectUp,A=void 0===z||z;c(this,g),this.fraction=Math.max(Math.min(+k,1),0),this.fn=m,this.container=o instanceof Node?o:document.querySelector(o),this.items=q,this.stagger=~~s,this.css=!!u,this.remove=!!w,this.throttle=~~y,this.detectUp=!!A,this.init()}return d(g,[{key:'init',value:function(){this.lastPosition=window.pageYOffset||document.documentElement.scrollTop,this.check(),this.isInitialized||(this.handler=this.throttle?this.throttling(this.check.bind(this),this.throttle).bind(this):this.check.bind(this),window.addEventListener('scroll',this.handler),window.addEventListener('load',this.handler),window.addEventListener('resize',this.handler),this.isInitialized=!0)}},{key:'check',value:function(j){var k=this,l=window.pageYOffset||document.documentElement.scrollTop,m=this.lastPosition>l,n=0,o=[].slice.call(this.container.querySelectorAll(this.items),0),p=0;this.detectUp&&m&&(o=o.reverse()),o.forEach(function(q,r){var s=void 0,t=void 0,u=void 0,v=void 0,w=void 0;try{if(s=q.getBoundingClientRect(),t=window.innerWidth,u=window.innerHeight,v={above:0>s.top&&0>=s.bottom,left:0>s.left&&0>=s.right,right:s.left>=t&&s.right>t,below:s.top>=u&&s.bottom>u},k.fraction){var x=Math.min(s.height,u)*k.fraction,y=Math.min(s.width,t)*k.fraction;w=(s.top<=u-x&&0<s.bottom||s.top<u&&s.bottom>=x&&s.bottom<=u)&&(s.left<=t-y&&0<s.right||s.left<t&&s.right>=y&&s.right<=t)}else w=s.top<u&&0<s.bottom&&s.left<t&&0<s.right;w?!q.classList.contains('itizin')&&(p+=~~q.dataset.izitinStagger||k.stagger,p?(k.css?(q.style.transitionDelay=p+'ms',q.classList.add('itizin')):setTimeout(function(){q.classList.add('itizin')},p*n),n++):q.classList.add('itizin')):k.remove?(q.style.transitionDelay='',q.classList.remove('itizin')):q.style.transitionDelay='',v.above?q.classList.add('izitin-above'):q.classList.remove('izitin-above'),v.below?q.classList.add('izitin-below'):q.classList.remove('izitin-below'),v.left?q.classList.add('izitin-left'):q.classList.remove('izitin-left'),v.right?q.classList.add('izitin-right'):q.classList.remove('izitin-right')}catch(A){}var z={index:r,direction:m?'up':'down',target:q,izitin:w,position:v,rect:s,stagger:p};k.fn&&k.fn.apply(q,[z])})}},{key:'throttling',value:function(j){var k=this,l=1>=arguments.length||void 0===arguments[1]?50:arguments[1],m=void 0,n=void 0;return function(){for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];var r=Date.now();m&&r<m+l?(clearTimeout(n),n=setTimeout(function(){m=r,j.apply(this,p)},l)):(m=r,j.apply(k,p))}}},{key:'reset',value:function(){[].slice.call(this.container.querySelectorAll(this.items)).forEach(function(j){j.style.transitionDelay='',j.classList.remove('itizin'),j.classList.remove('izitin-above'),j.classList.remove('izitin-below'),j.classList.remove('izitin-left'),j.classList.remove('izitin-right')})}},{key:'destroy',value:function(){this.reset(),window.removeEventListener('scroll',this.handler),window.removeEventListener('load',this.handler),window.removeEventListener('resize',this.handler),this.isInitialized=!1}}]),g}();b.default=f,a.exports=b['default']});