/*!
 * izitin - version 0.5.0
 *
 * Made with â¤ by Steve Ottoz so@dev.so
 *
 * Copyright (c) 2017 Steve Ottoz
 */
'use strict';export default class Izitin{constructor({fraction:a=0,fn:b=null,container:c=document,items:d='.izitin',stagger:f=100,css:g=!0,remove:h=!1,throttle:j=0,detectUp:k=!0}={}){this.fraction=Math.max(Math.min(+a,1),0),this.fn=b,this.container=c instanceof Node?c:document.querySelector(c),this.items=d,this.stagger=~~f,this.css=!!g,this.remove=!!h,this.throttle=~~j,this.detectUp=!!k,this.init()}init(){this.lastPosition=window.pageYOffset||document.documentElement.scrollTop,this.check(),this.isInitialized||(this.handler=this.throttle?this.throttling(this.check.bind(this),this.throttle).bind(this):this.check.bind(this),window.addEventListener('scroll',this.handler),window.addEventListener('load',this.handler),window.addEventListener('resize',this.handler),this.isInitialized=!0)}check(a){const b=window.pageYOffset||document.documentElement.scrollTop,c=this.lastPosition>b;let d=0,f=[].slice.call(this.container.querySelectorAll(this.items),0),g=0;this.detectUp&&c&&(f=f.reverse()),f.forEach((h,j)=>{let k,l,m,n,o;try{if(k=h.getBoundingClientRect(),l=window.innerWidth,m=window.innerHeight,n={above:0>k.top&&0>=k.bottom,left:0>k.left&&0>=k.right,right:k.left>=l&&k.right>l,below:k.top>=m&&k.bottom>m},this.fraction){const q=Math.min(k.height,m)*this.fraction,r=Math.min(k.width,l)*this.fraction;o=(k.top<=m-q&&0<k.bottom||k.top<m&&k.bottom>=q&&k.bottom<=m)&&(k.left<=l-r&&0<k.right||k.left<l&&k.right>=r&&k.right<=l)}else o=k.top<m&&0<k.bottom&&k.left<l&&0<k.right;o?!h.classList.contains('itizin')&&(g+=~~h.dataset.izitinStagger||this.stagger,g?(this.css?(h.style.transitionDelay=`${g}ms`,h.classList.add('itizin')):setTimeout(()=>{h.classList.add('itizin')},g*d),d++):h.classList.add('itizin')):this.remove?(h.style.transitionDelay='',h.classList.remove('itizin')):h.style.transitionDelay='',n.above?h.classList.add('izitin-above'):h.classList.remove('izitin-above'),n.below?h.classList.add('izitin-below'):h.classList.remove('izitin-below'),n.left?h.classList.add('izitin-left'):h.classList.remove('izitin-left'),n.right?h.classList.add('izitin-right'):h.classList.remove('izitin-right')}catch(q){}const p={index:j,direction:c?'up':'down',target:h,izitin:o,position:n,rect:k,stagger:g};this.fn&&this.fn.apply(h,[p])})}throttling(a,b=50){let c,d;return(...f)=>{const g=Date.now();c&&g<c+b?(clearTimeout(d),d=setTimeout(function(){c=g,a.apply(this,f)},b)):(c=g,a.apply(this,f))}}reset(){[].slice.call(this.container.querySelectorAll(this.items)).forEach(a=>{a.style.transitionDelay='',a.classList.remove('itizin'),a.classList.remove('izitin-above'),a.classList.remove('izitin-below'),a.classList.remove('izitin-left'),a.classList.remove('izitin-right')})}destroy(){this.reset(),window.removeEventListener('scroll',this.handler),window.removeEventListener('load',this.handler),window.removeEventListener('resize',this.handler),this.isInitialized=!1}}