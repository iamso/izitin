/*!
 * izitin - version 0.2.0
 *
 * Made with ❤ by Steve Ottoz so@dev.so
 *
 * Copyright (c) 2017 Steve Ottoz
 */
'use strict';export default class Izitin{constructor({fraction:a=0,fn:b=null,container:c=document,items:d='.izitin',stagger:f=100,css:g=!0,remove:h=!1,throttle:j=0}={}){this.fraction=Math.max(Math.min(+a,1),0),this.fn=b,this.container=c instanceof Node?c:document.querySelector(c),this.items=d,this.stagger=+f,this.css=!!g,this.remove=!!h,this.throttle=+j,this.init()}init(){this.lastPosition=window.pageYOffset||document.documentElement.scrollTop,this.isInitialized||(this._handler=this.throttle?this.throttling(this.handler.bind(this),this.throttle).bind(this):this.handler.bind(this),window.addEventListener('scroll',this._handler),window.addEventListener('load',this._handler),window.addEventListener('resize',this._handler),this.isInitialized=!0)}handler(a){const b=window.pageYOffset||document.documentElement.scrollTop,c=this.lastPosition>b;let d=0,f=this.container.querySelectorAll(this.items);c&&(f=[].slice.call(f,0).reverse()),f.forEach((g,h)=>{let j,k,l,m,n;try{if(j=g.getBoundingClientRect(),k=window.innerWidth,l=window.innerHeight,m={above:0>j.top&&0>=j.bottom,left:0>j.left&&0>=j.right,right:j.left>=k&&j.right>k,below:j.top>=l&&j.bottom>l},this.fraction){const p=Math.min(j.height,l)*this.fraction,q=Math.min(j.width,k)*this.fraction;n=(j.top<=l-p&&0<j.bottom||j.top<l&&j.bottom>=p&&j.bottom<=l)&&(j.left<=k-q&&0<j.right||j.left<k&&j.right>=q&&j.right<=k)}else n=j.top<l&&0<j.bottom&&j.left<k&&0<j.right;n?this.stagger&&!g.classList.contains('itizin')?(this.css?(g.style.transitionDelay=`${this.stagger*d}ms`,g.classList.add('itizin')):setTimeout(()=>{g.classList.add('itizin')},this.stagger*d),d++):(g.style.transitionDelay='',g.classList.add('itizin')):this.remove?(g.style.transitionDelay='',g.classList.remove('itizin')):g.style.transitionDelay='',m.above?g.classList.add('izitin-above'):g.classList.remove('izitin-above'),m.below?g.classList.add('izitin-below'):g.classList.remove('izitin-below'),m.left?g.classList.add('izitin-left'):g.classList.remove('izitin-left'),m.right?g.classList.add('izitin-right'):g.classList.remove('izitin-right')}catch(p){}const o={index:h,direction:c?'up':'down',target:g,izitin:n,position:m,rect:j};this.fn&&this.fn.apply(g,[o])})}throttling(a,b=50){let c,d;return(...f)=>{const g=Date.now();c&&g<c+b?(clearTimeout(d),d=setTimeout(function(){c=g,a.apply(this,f)},b)):(c=g,a.apply(this,f))}}destroy(){this.container.querySelectorAll(this.items).forEach(a=>{a.classList.remove('itizin'),a.classList.remove('izitin-above'),a.classList.remove('izitin-below'),a.classList.remove('izitin-left'),a.classList.remove('izitin-right')}),window.removeEventListener('scroll',this._handler),window.removeEventListener('load',this._handler),window.removeEventListener('resize',this._handler),this.isInitialized=!1}}