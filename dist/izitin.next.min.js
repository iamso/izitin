/*!
 * izitin - version 0.1.0
 *
 * Made with ❤ by Steve Ottoz so@dev.so
 *
 * Copyright (c) 2017 Steve Ottoz
 */
'use strict';export default class Izitin{constructor({fraction:a=0,fn:b=null,container:c=document,items:d='.izitin',stagger:f=100,remove:g=!1}={}){this.fraction=Math.max(Math.min(+a,1),0),this.fn=b,this.container=c instanceof Node?c:document.querySelector(c),this.items=d,this.stagger=+f,this.remove=!!g,this.init()}init(){this.lastPosition=window.pageYOffset||document.documentElement.scrollTop,this.handler(),this.isInitialized||(this._handler=this.handler.bind(this),window.addEventListener('scroll',this._handler),window.addEventListener('load',this._handler),window.addEventListener('resize',this._handler),this.isInitialized=!0)}handler(a){const b=window.pageYOffset||document.documentElement.scrollTop;let c=0,d=this.container.querySelectorAll(this.items);this.lastPosition>b&&(d=[].slice.call(d,0).reverse()),d.forEach(f=>{let g,h,i,j,k;try{if(g=f.getBoundingClientRect(),h=window.innerWidth,i=window.innerHeight,j={above:0>g.top&&0>=g.bottom,left:0>g.left&&0>=g.right,right:g.left>=h&&g.right>h,below:g.top>=i&&g.bottom>i},this.fraction){const m=Math.min(g.height,i)*this.fraction,n=Math.min(g.width,h)*this.fraction;k=(g.top<=i-m&&0<g.bottom||g.top<i&&g.bottom>=m&&g.bottom<=i)&&(g.left<=h-n&&0<g.right||g.left<h&&g.right>=n&&g.right<=h)}else k=g.top<i&&0<g.bottom&&g.left<h&&0<g.right;k?this.stagger&&!f.classList.contains('itizin')?(setTimeout(()=>{f.classList.add('itizin')},this.stagger*c),c++):f.classList.add('itizin'):this.remove&&f.classList.remove('itizin'),j.above?f.classList.add('izitin-above'):f.classList.remove('izitin-above'),j.below?f.classList.add('izitin-below'):f.classList.remove('izitin-below'),j.left?f.classList.add('izitin-left'):f.classList.remove('izitin-left'),j.right?f.classList.add('izitin-right'):f.classList.remove('izitin-right')}catch(m){}const l={target:f,izitin:k,position:j,rect:g};this.fn&&this.fn.apply(f,[l])})}destroy(){this.container.querySelectorAll(this.items).forEach(a=>{a.classList.remove('itizin'),a.classList.remove('izitin-above'),a.classList.remove('izitin-below'),a.classList.remove('izitin-left'),a.classList.remove('izitin-right')}),window.removeEventListener('scroll',this._handler),window.removeEventListener('load',this._handler),window.removeEventListener('resize',this._handler),this.isInitialized=!1}}